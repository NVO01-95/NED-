{% extends "base.html" %}
{% block title %}Voyage · NED{% endblock %}

{% block content %}
<section class="ned-card">
  <h2>Voyage</h2>

  <p class="small-hint">
    <strong>{{ voyage.title if voyage.title else (voyage.departure ~ " → " ~ voyage.destination) }}</strong><br>
    Departure: {{ voyage.departure }} · Destination: {{ voyage.destination }}<br>
    Done at: {{ voyage.done_at if voyage.done_at else "-" }}
  </p>

  {% if voyage.route_snapshot and voyage.route_snapshot.calc %}
    <p class="small-hint">
      Total: {{ voyage.route_snapshot.calc.total_nm }} NM · ETA: {{ voyage.route_snapshot.calc.total_eta_hhmm }}
    </p>
  {% endif %}

  <form method="post">
    <div class="form-row">
      <label for="tags">Tags (comma separated)</label>
      <input id="tags" name="tags" type="text" value="{{ (voyage.tags|join(', ')) if voyage.tags else '' }}" placeholder="shallow, windy, traffic">
    </div>

    <div class="form-row">
      <label for="notes">Notes / Lessons learned</label>
      <textarea id="notes" name="notes" rows="10" placeholder="What happened, what to remember next time...">{{ voyage.notes if voyage.notes else '' }}</textarea>
      <p class="small-hint">Tip: keep it short and practical (hazards, communications, docking notes).</p>
    </div>

    <button type="submit" class="btn">Save</button>
    <a class="nav-link" href="{{ url_for('voyage_sheet') }}">Back to Voyages</a>
  </form>
</section>
{% endblock %}
